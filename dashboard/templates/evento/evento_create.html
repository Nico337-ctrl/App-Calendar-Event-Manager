{% extends 'layouts/base_dashboard.html' %}
{% block content %}
<div class="form-container">
    <h2>Crear evento</h2>
    <form action="{% url 'evento_create' %}" method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="titulo">Titulo</label>
            {{ formulario.titulo }}
        </div>
        <div class="form-group">
            <label for="email">Descripcion</label>
            {{ formulario.descripcion }}
        </div>
        <div class="form-group">
            <label for="budget">Informacion extra</label>
            {{ formulario.info_extra }}
        </div>
        <div class="form-group">
            <label for="message">Inicia</label>
            {{ formulario.inicia_el }}
        </div>
        <div class="form-group">
            <label for="message">Termina</label>
            {{ formulario.termina_el }}
        </div>
        <div class="form-group">
            <label for="message">Etiqueta</label>
            {{ formulario.etiqueta }}
        </div>
        <div class="form-group">
            <label for="message">Filtrar usuarios por:</label>
            {{ form_notificar.filtro }}
        </div>
        <div class="form-group">
            <label for="message">Seleccionar usuarios por su rol:</label>
            {{ form_notificar.filtro_rol }}
        </div>

        <div class="form-group">
            <label for="message">Seleccionar usuarios por su email:</label>
            {{ form_notificar.filtro_usuarios_email }}
        </div>

        <button type="submit" id="editLink">Guardar</button>
        <a href="{% url 'evento_etiqueta' %}" id="eliminarLink">Cancelar</a>
    </form>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        const filtroSelect = document.getElementById('filtro-select');
        const filtroRol = document.getElementById('filtro-rol');
        const filtroUsuarios = document.getElementById('filtro-usuarios');

        filtroSelect.addEventListener('change', function() {
            const value = this.value;
            
            filtroRol.style.display = 'none';
            filtroUsuarios.style.display = 'none';

            if (value === 'rol_agrupado') {
                filtroRol.style.display = 'block';
            } else if (value === 'usuarios') {
                filtroUsuarios.style.display = 'block';
            }
        });

        // L贸gica para seleccionar "Todos" en filtro de usuarios
        filtroUsuarios.addEventListener('change', function() {
            const selectedOptions = Array.from(filtroUsuarios.selectedOptions);
            const isSelectAll = selectedOptions.some(option => option.value === 'todos');
            
            if (isSelectAll) {
                // Marcar todas las opciones si se selecciona "Todos"
                for (let i = 0; i < filtroUsuarios.options.length; i++) {
                    filtroUsuarios.options[i].selected = true;
                }
            }
        });

        // L贸gica para seleccionar "Todos" en filtro de roles
        filtroRol.addEventListener('change', function() {
            if (filtroRol.value === 'todos') {
                // L贸gica adicional si es necesario para manejar la selecci贸n de todos los roles
                console.log("Seleccionado todos los roles");
            }
        });
    });
    </script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    
    <script>
        $(document).ready(function() {
            $('#filtro-rol').select2();
            $('#filtro-usuarios').select2();
        });
    </script>
</div>

<style>
    .form-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
    }
    
    .form-container h2 {
        font-size: 24px;
        margin-bottom: 20px;
        font-weight: 700;
        color: #333;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        font-size: 14px;
        margin-bottom: 5px;
        color: #666;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 10px;
        font-size: 14px;
        border-radius: 4px;
        border: 1px solid #ddd;
        color: #333;
    }
    
    .form-group textarea {
        resize: vertical;
    }
    
    .btn-submit {
        display: inline-block;
        padding: 10px 20px;
        font-size: 16px;
        color: #fff;
        background-color: #29a900;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        box-shadow: 0px 1px 3px rgbargba(57, 169, 0, 0.5);
    }
    
    .btn-submit:hover {
        background-color: #29c900;
    }
</style>



{% endblock %}
